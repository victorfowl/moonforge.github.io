<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <title>Proyecto – Moonforge</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../styles.css" rel="stylesheet">
</head>
<body>
    <header class="topbar">
        <div class="container nav-wrap">
            <a href="../index.html" class="brand">Moonforge</a>
            <nav class="nav">
                <a href="../services.html">Servicios</a>
                <a href="../portfolio.html">Portfolio</a>
                <a href="../contact.html">Contacto</a>
            </nav>
        </div>
    </header>

    <main class="container section">
        <h1 id="projTitle"></h1>
        <p id="projSubtitle" class="muted"></p>
        <div id="carousel" class="carousel"></div>
        <p id="projDesc"></p>
        <div id="projTags" class="tags"></div>
    </main>

    <footer class="footer"><div class="container">© <span id="year"></span> Moonforge</div></footer>

    <script src="../main.js"></script>
    <script>
    // Carga el proyecto por slug usando ?slug= o desde la ruta (projects/slug.html -> slug se puede extraer)
    document.addEventListener('DOMContentLoaded', async () => {
      const slug = (new URLSearchParams(location.search)).get('slug')
                || location.pathname.split('/').pop().replace('.html','');

      const dict = await loadJSON(dicts[LANG]); // ya definido en main.js
      applyI18n(dict);

      const items = await loadJSON(portfolioData[LANG]);
      const p = items.find(x => x.slug === slug);
      if (!p) { document.getElementById('projTitle').textContent = 'Proyecto no encontrado'; return; }

      document.getElementById('projTitle').textContent = p.title;
      document.getElementById('projSubtitle').textContent = p.subtitle || '';

      const tagsEl = document.getElementById('projTags');
      tagsEl.innerHTML = (p.tags||[]).map(t=>`<span class="tag">${t}</span>`).join('');

      // Render carrusel
      renderCarousel(document.getElementById('carousel'), p.media || [], p.thumb, p.video, p.poster);
      if (document.getElementById('year')) document.getElementById('year').textContent = new Date().getFullYear();
    });
    </script>
</body>
</html>
